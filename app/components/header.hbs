<div
  class="shadow relative {{if this.colorScheme.isDark 'bg-black border-b border-gray-800' 'bg-white'}}"
  {{did-insert this.handleDidInsert}}
  {{will-destroy this.handleWillDestroy}}
  data-test-header
>
  {{!  <div class="w-full absolute top-0 left-0 bg-teal-500 h-2px"></div>}}

  <div class="container {{if this.containerWidth.maxWidthIsLg 'lg:max-w-screen-lg'}} mx-auto flex items-stretch flex-col md:flex-row px-3 md:px-6">
    <div class="flex items-center justify-between">
      {{! Logo }}
      <div class="flex items-center">
        <img class="h-8 my-3 pr-2" src={{this.logoImage}} alt="CodeCrafters" />

        <div class="{{if this.colorScheme.isDark 'text-gray-200' 'text-gray-600'}} pr-5 text-sm flex-grow">
          <LinkTo @route="catalog">CodeCrafters</LinkTo>
        </div>
      </div>

      {{! Nav Toggle on Mobile }}
      <button
        class="md:hidden {{if this.colorScheme.isDark 'text-gray-200' 'text-gray-600'}} pl-10 py-3 focus:outline-none"
        type="button"
        {{on "click" this.toggleMobileMenu}}
      >
        <svg class="fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path
            class="heroicon-ui"
            d="M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"
          ></path>
        </svg>
      </button>
    </div>

    {{! Desktop  }}
    <div class="hidden md:flex items-center justify-between flex-grow">
      <div class="flex items-center">
        {{! Divider }}
        <div class="{{if this.colorScheme.isDark 'bg-gray-700' 'bg-gray-200'}} w-px h-5 mr-3"></div>

        {{! Top-level links }}
        <LinkTo
          @route="catalog"
          class="text-sm px-2 {{if this.colorScheme.isDark 'text-gray-200' 'text-gray-600'}}"
          data-test-catalog-link
        >Catalog</LinkTo>

        {{#if this.featureFlags.canSeeBadges}}
          <LinkTo @route="badges" class="text-sm px-2 {{if this.colorScheme.isDark 'text-gray-200' 'text-gray-600'}}">Badges</LinkTo>
        {{/if}}

        {{#if this.featureFlags.canSeeConceptsIndex}}
          <LinkTo @route="concepts" class="text-sm px-2 {{if this.colorScheme.isDark 'text-gray-200' 'text-gray-600'}}">Concepts</LinkTo>
        {{/if}}

        <LinkTo
          @route="vote"
          class="text-sm px-2 {{if this.colorScheme.isDark 'text-gray-200' 'text-gray-600'}}"
          data-test-course-ideas-link
        >Vote</LinkTo>

        {{#if this.currentUser.isAdmin}}
          <a href={{this.adminPanelLink}} class="text-sm px-2 {{if this.colorScheme.isDark 'text-gray-200' 'text-gray-600'}}">Admin</a>
        {{/if}}
      </div>

      {{! Account Dropdown on Desktop }}
      <div class="invisible md:visible flex items-center ml-6">
        {{#if this.authenticator.isAuthenticated}}
          <FeedbackButton class="mr-4" as |dd|>
            <div
              role="button"
              class="rounded border
                {{if
                  dd.isOpen
                  (if this.colorScheme.isDark 'border-gray-300' 'border-gray-600')
                  (if this.colorScheme.isDark 'border-gray-600' 'border-gray-200')
                }}
                {{if this.colorScheme.isDark 'text-gray-300' 'text-gray-600'}}
                {{if this.colorScheme.isDark 'hover:border-gray-300' 'hover:border-gray-600'}}
                transition-colors px-2 py-1 text-xs"
              data-test-feedback-button
            >
              Feedback
            </div>
          </FeedbackButton>

          {{#if this.currentUser.isCodecraftersPartner}}
            <Header::VipBadge class="mr-3" />
          {{/if}}

          <Header::AccountDropdown />
        {{else}}
          <Header::SignInWithGithubButton />
        {{/if}}
      </div>
    </div>

    {{! Mobile }}
    {{#if this.mobileMenuIsExpanded}}
      <div class="md:hidden flex-col items-center flex-grow">
        <div class="bg-gray-300 h-px w-full">
        </div>

        <div class="py-3">
          <LinkTo @route="catalog" class="block text-sm py-3 {{if this.colorScheme.isDark 'text-gray-200' 'text-gray-600'}}">Catalog</LinkTo>

          {{#if this.featureFlags.canSeeBadges}}
            <LinkTo @route="badges" class="block text-sm py-3 {{if this.colorScheme.isDark 'text-gray-200' 'text-gray-600'}}">Badges</LinkTo>
          {{/if}}

          {{#if this.featureFlags.canSeeConceptsIndex}}
            <LinkTo @route="concepts" class="block text-sm py-3 {{if this.colorScheme.isDark 'text-gray-200' 'text-gray-600'}}">Concepts</LinkTo>
          {{/if}}

          <LinkTo @route="vote" class="block text-sm py-3 {{if this.colorScheme.isDark 'text-gray-200' 'text-gray-600'}}">Vote</LinkTo>

          {{#if this.currentUser.isAdmin}}
            <a href="/admin" class="block text-sm py-3 text-gray-600">Admin</a>
          {{/if}}

          {{#if this.currentUser}}
            <Header::AccountDropdown />
          {{else}}
            <Header::SignInWithGithubButton />
          {{/if}}
        </div>
      </div>
    {{/if}}
  </div>
</div>
{{#if this.featureFlags.canSeeDiscountBanner}}
  <div class="bg-black text-white flex gap-2 justify-center py-1">
    <div>Upgrade today to get 40% off</div>
    {{svg-jar "arrow-right" class="w-4"}}
  </div>
{{/if}}