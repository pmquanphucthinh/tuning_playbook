<CoursePage::InstructionsCard
  @isCollapsedByDefault={{true}}
  @onExpand={{this.handleExpand}}
  id="language-instructions-card"
  ...attributes
  {{did-update this.loadLanguageGuides @courseStage}}
  {{did-insert this.loadLanguageGuides}}
>
  <:content>
    <div class="flex items-center justify-between border-b pb-2 mb-5 w-full">
      <div class="flex items-center gap-x-3">
        <h2 class="font-semibold text-lg text-gray-700">{{@repository.language.name}} Guide</h2>
        <div class="inline-flex text-xs text-white font-semibold border border-teal-500 bg-teal-500 rounded px-1.5 py-0.5 w-fit">
          BETA
          <EmberTooltip @text="This is a beta feature, please send us feedback!" @side="top" />
        </div>
      </div>

      <div class="text-sm">
        <span class="text-gray-500">Proficiency:</span>
        <span class="text-gray-700 font-semibold">Beginner</span>
      </div>
    </div>

    <Alert class="mb-6">
      <p>
        This is a beta feature. Let us know if you find this useful or not using the "👍 Helpful" / "👎 Not Helpful" buttons below. You can also send
        us detailed feedback using the
        <div class="inline-flex">
          {{! @glint-expect-error: not ts-ified }}
          <FeedbackButton class="font-blue-500 hover:font-blue-600 font-semibold underline">share feedback</FeedbackButton>
        </div>
        button.
      </p>

      <p>
        Change the
        <b>Proficiency</b>
        setting above to see more or less detail.
      </p>
    </Alert>

    {{#if this.languageGuide}}
      <div class="prose has-prism-highlighting" {{highlight-code-blocks contents=this.languageGuide.markdownForBeginner}}>
        {{markdown-to-html this.languageGuide.markdownForBeginner}}
      </div>
    {{else if @repository.language}}
      <div class="prose">
        <p class="text-gray-800">Looks like we don't have a language guide available for {{@repository.language.name}} yet.</p>
      </div>
    {{else}}
      <div class="prose">
        <p class="text-gray-800">Once you create a repository, you'll see a language-specific guide to this stage here.</p>
      </div>
    {{/if}}

    {{#if this.languageGuide}}
      <div class="flex items-center gap-x-3 mt-5">
        <TertiaryButton @size="small">
          👍 Helpful
        </TertiaryButton>
        <TertiaryButton @size="small">
          👎 Not Helpful
        </TertiaryButton>
        {{! @glint-expect-error: not ts-ified }}
        <FeedbackButton class="text-gray-800 hover:text-gray-900 underline text-sm">
          Share feedback
        </FeedbackButton>
      </div>
    {{/if}}
  </:content>
</CoursePage::InstructionsCard>