{{#each @solutions as |solution solutionIndex|}}
  <CoursePage::CourseStageStep::CommunitySolutionCard
    @isCollapsedByDefault={{gt solutionIndex 0}}
    @metadataForDownvote={{hash position_in_list=(add solutionIndex 1)}}
    @metadataForUpvote={{hash position_in_list=(add solutionIndex 1)}}
    @onExpand={{fn this.handleSolutionExpand solution solutionIndex}}
    @onPublishToGithubButtonClick={{fn (mut this.configureGithubIntegrationModalIsOpen) true}}
    @solution={{solution}}
    {{! account for the sticky menu bar }}
    class="scroll-mt-16"
  />
{{/each}}

{{#if this.configureGithubIntegrationModalIsOpen}}
  <ModalBackdrop>
    {{! @glint-expect-error not ts-ified yet }}
    <CoursePage::ConfigureGithubIntegrationModal
      {{! TODO: We actually don't know if the solution belongs to the **active** repository, just that it belongs to the user !}}
      @repository={{@repository}}
      {{! @glint-expect-error mut types are broken }}
      @onClose={{fn (mut this.configureGithubIntegrationModalIsOpen) false}}
    />
  </ModalBackdrop>
{{/if}}