<div class="flex items-center flex-wrap mr-6">
  <div class="text-lg md:text-2xl mr-2 mb-3 sm:mb-6" data-test-course-stage-solution-modal-title>
    <span class="text-gray-600">Stage #{{@courseStage.position}}:</span>
    <span class="font-bold text-gray-700">{{@courseStage.name}} </span>
  </div>

  <CoursePage::CourseStageSolutionModal::StageSwitcherContainer
    class="mb-3 sm:mb-6"
    @currentStage={{@courseStage}}
    @onPreviousStageButtonClick={{@onPreviousStageButtonClick}}
    @onNextStageButtonClick={{@onNextStageButtonClick}}
  />
</div>

<div class="flex flex-wrap items-center justify-between">
  <div class="flex items-center overflow-x-scroll pb-4 mb-2">
    {{#unless @courseStage.isFirst}}
      <CoursePage::CourseStageSolutionModal::HeaderTabLink
        @icon="user-group"
        @text="Solutions"
        @isActive={{eq @activeTab "community_solutions"}}
        {{on "click" (fn @onTabLinkClick "community_solutions")}}
      />
    {{/unless}}

    {{#if @currentSolution}}
      <CoursePage::CourseStageSolutionModal::HeaderTabLink
        @icon="code"
        @text="Verified Solution"
        @isActive={{eq @activeTab "verified_solution"}}
        @authorDetails={{@currentSolution.authorDetails}}
        @reviewersDetails={{@currentSolution.reviewersDetails}}
        {{on "click" (fn @onTabLinkClick "verified_solution")}}
      />
    {{/if}}

    {{#if @courseStage.sourceWalkthrough}}
      <CoursePage::CourseStageSolutionModal::HeaderTabLink
        @iconUrl={{@courseStage.course.logoUrl}}
        @text="Source Walkthrough"
        @isActive={{eq @activeTab "source_walkthrough"}}
        {{on "click" (fn @onTabLinkClick "source_walkthrough")}}
      />
    {{/if}}

    <CoursePage::CourseStageSolutionModal::HeaderTabLink
      @icon="chat"
      @text="Comments"
      @isActive={{eq @activeTab "comments"}}
      {{on "click" (fn @onTabLinkClick "comments")}}
    />
  </div>

  <div>
    {{#if (or (eq @activeTab "verified_solution") (eq @activeTab "explanation"))}}
      <CoursePage::CourseStageSolutionModal::LanguageDropdown
        @currentLanguage={{@currentSolution.language}}
        @requestedLanguage={{@requestedSolutionLanguage}}
        @courseStage={{@courseStage}}
        @onRequestedLanguageChange={{@onRequestedSolutionLanguageChange}}
        @onDidInsertDropdown={{@onDidInsertLanguageDropdown}}
        class="mb-6"
      />
    {{else if (eq @activeTab "community_solutions")}}
      <CoursePage::CourseStageSolutionModal::CommunitySolutionsLanguageDropdown
        @courseStage={{@courseStage}}
        @requestedLanguage={{@requestedSolutionLanguage}}
        @onRequestedLanguageChange={{@onRequestedSolutionLanguageChange}}
        @onDidInsertDropdown={{@onDidInsertLanguageDropdown}}
        class="mb-6"
      />
    {{/if}}
  </div>
</div>