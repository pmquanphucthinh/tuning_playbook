<PageSection @title="Earnings" data-test-referred-users-container ...attributes>
  {{#if (gt this.totalEarningsAmountInDollars 0)}}
    <table class="max-w-xs">
      <tbody>
        <tr class="border-b">
          <td class="text-gray-700 font-semibold whitespace-nowrap py-2 text-sm">Total Earnings</td>
          <td class="font-semibold text-gray-700 py-2 text-right w-full" data-test-total-earnings-amount>${{this.totalEarningsAmountInDollars}}</td>
        </tr>
        {{#each this.lineItems as |item|}}
          <ReferralsPage::EarningsContainer::LineItem
            @title={{item.title}}
            @helpText={{item.helpText}}
            @isLoading={{this.isLoadingPayouts}}
            @amountInDollars={{item.amountInDollars}}
          />
        {{/each}}
      </tbody>
    </table>

    <div class="mt-6">
      {{#if (gt this.readyToPayoutEarningsAmountInCents 10000)}}
        <PrimaryButton
          @type="primary"
          @size="small"
          @onClick={{this.withdraw}}
          {{on "click" (fn (mut this.isCreatingPayout) true)}}
          data-test-initiate-payout-button
        >
          Initiate Payout
        </PrimaryButton>
      {{else}}
        <div class="inline-flex">
          <PrimaryButton @type="primary" @size="small" @isDisabled={{true}} @onClick={{this.withdraw}} data-test-initiate-payout-button>
            Initiate Payout
          </PrimaryButton>
          <EmberTooltip @text="This button will be enabled when you have $100+ ready to payout." />
        </div>
      {{/if}}
    </div>
  {{else}}
    <div class="text-gray-600 text-sm text-center py-10" data-test-referred-users-description>
      When your earnings are ready to withdraw, you'll be able to view details here.
    </div>
  {{/if}}

  {{#if this.isCreatingPayout}}
    <ModalBackdrop>
      <ReferralsPage::CreatePayoutModal
        @onClose={{this.handleCreatePayoutModalClose}}
        @withdrawableEarningsAmountInCents={{this.readyToPayoutEarningsAmountInCents}}
      />
    </ModalBackdrop>
  {{/if}}
</PageSection>