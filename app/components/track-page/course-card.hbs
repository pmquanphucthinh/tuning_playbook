{{#if this.currentUserIsAnonymous}}
  <TrackPage::Card @title="{{@course.name}}" @logoImageUrl={{@logoImageUrl}} @logoImageAltText={{@logoImageAltText}} @recentParticipants={{this.recentParticipants}} class="mb-4">
    <div class="leading-6 prose mb-6">
      {{this.introductionHtml}}
    </div>

    {{! Contents are masked, hence the fixed height }}
    <div class="h-60 overflow-hidden">
      {{#each @course.sortedStages as |stage|}}
        <TrackPage::CourseCard::StageListItem @language={{@language}} @stage={{stage}} @isComplete={{false}} />
      {{/each}}

      <div class="absolute top-16 bottom-0 left-0 right-0 vertical-mask p-4 flex items-end justify-center">
        <TrackPage::CourseCard::SignupToPreviewButton @language={{@language}} />
      </div>
    </div>
  </TrackPage::Card>
{{else}}
  <TrackPage::Card
    @isComplete={{@activeRepository.allStagesAreComplete}}
    @isNavigatingToOtherPage={{true}}
    @logoImageAltText={{@logoImageAltText}}
    @logoImageUrl={{@logoImageUrl}}
    @recentParticipants={{this.recentParticipants}}
    @title="{{@course.name}}"
    role="button"
    class="mb-4"
    {{on "click" this.handleClick}}
  >
    {{#if @activeRepository}}
      <div class="mb-4">
        <TrackPage::CourseCard::ProgressBar @course={{@course}} @lastPushedRepository={{@activeRepository}} />
      </div>
    {{/if}}

    <div class="leading-6 prose mb-6">
      {{this.introductionHtml}}
    </div>

    {{#each @course.sortedStages as |stage|}}
      <TrackPage::CourseCard::StageListItem
        @language={{@language}}
        @stage={{stage}}
        @isComplete={{includes stage @activeRepository.completedStages}}
      />
    {{/each}}
  </TrackPage::Card>
{{/if}}